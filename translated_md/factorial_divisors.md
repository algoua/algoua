# Знаходження степені подільника факторіала

Дано два числа: $n$ і $k$. Потрібно порахувати, з який степенем дільник $k$ входити в число $n!$, тобто знайти найбільше $x$ таке, що $n!$ ділиться на $k^x$.

## Розв'язок для випадку простого $k$

Розглянемо спочатку випадок, коли $k$ просте.

Выпишем вираз для факторіала в явному вигляді:

$$
n! = 1\ 2\ 3\ \ldots\ (n-1)\ n
$$

Зауважимо, що кожний $k$-ый член цього твори ділиться на $k$, тобто дає +1 до відповіді; кількість таких членів рівне $\lfloor n/k \rfloor$.

Далі, зауважимо, що кожний $k^2$-ый член цього ряда ділиться на $k^2$, тобто дає ще +1 до відповіді (враховуючи, що $k$ в першо] степені вже було учтено до цього); кількість таких членів рівне $\lfloor n/k^2 \rfloor$.

І так далі, кожний $k^i$-ый член ряда дає +1 до відповіді, а кількість таких членів рівне $\lfloor n/k^i \rfloor$.

Таким чином, відповідь рівний величині:

$$
\frac{n}{k} + \frac{n}{k^2} + \ldots + \frac{n}{k^i} + \ldots
$$

Ця сума, звісно, не бесконечная, т.до. тільки перші приблизно $\log_k n$ членів отличны від нуля. Отже, асимптотика такого алгоритму рівна $O(\log_k n)$.

Реалізація:

<!--- TODO: specify code snippet id -->
``` cpp
int fact_pow (int n, int k) {
    int res = 0;
    while (n) {
        n /= k;
        res += n;
    }
    return res;
}
```

## Розв'язок для випадку составного $k$

Ту ж ідею застосувати тут безпосередньо вже не можна.

Але ми можемо факторизовать $k$, розв'язати задачу для кожного його простого подільника, а потім вибрати мінімум з відповідей.

Більш формально, нехай $k_i$ - це $i$-ый дільник числа $k$, входящий в нього в степені $p_i$. Вирішимо задачу для $k_i$ з допомогою вышеописанной формули за $O(\log n)$; нехай ми отримали відповідь ${\rm Ans}_i$. Значить відповіддю для составного $k$ буде мінімум з величин ${\rm Ans}_i / p_i$.

Враховуючи, що факторизація найпростішим чином виконується за $O(\sqrt{k})$, отримуємо підсумкову асимптотику $O(\sqrt{k})$.
