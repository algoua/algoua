# Знаковая площа трикутника і предикат "За годинний стрілкою"

## Визначення

Нехай дані три точки $p_1$, $p_2$, $p_3$. Знайдемо значення **знаковой площі** $S$ трикутника $p_1 p_2 p_3$, тобто площі цього трикутника, взятой зі знаком плюс або мінус в залежності від типу поворота, утвореного точками $p_1$, $p_2$, $p_3$: проти годинний стрілки або по ній відповідно.

Зрозуміло, що, якщо ми навчимося обчислювати таку знаковую ("ориентированную") площа, то зможемо і знаходити звичайну площа будь-якого трикутника, а також зможемо перевіряти, по годинний стрілкою або проти направлена яка-або трійка точок.

## Обчислення

Скористаємося понятием **косого** (псевдоскалярного) твори векторів. Воно як раз рівне подвоєною знаковой площі трикутника:

$$
a \land b = |a| |b| \sin \angle (a, b) = 2 S,
$$

де кут $\angle (a, b)$ береться орієнтованим, тобто це кут обертання між цими векторами проти годинний стрілки.

(Модуль косого твори двох векторів рівний модулю **векторного** твори їх).

Косое добуток обчислюється як величина визначника, составленного з координат точок:

$$
2 S = \left| \matrix{
x_1 & y_1 & 1 \cr
x_2 & y_2 & 1 \cr
x_3 & y_3 & 1 \cr
} \right| .
$$

Розкриваючи визначник, можна получити таку формулу:

$$
2 S = x_1 (y_2 - y_3) + x_2 (y_3 - y_1) + x_3 (y_1 - y_2).
$$

Можна сгруппировать третій доданок з першими двома, позбувшись від одного множення:

$$
2 S = (x_2 - x_1) (y_3 - y_1) - (y_2 - y_1) (x_3 - x_1).
$$

Последнюю формулу зручно записувати і запам'ятовувати в матричном вигляді, як наступного визначник:

$$
2 S = \left| \matrix{
x_2 - x_1 & y_2 - y_1 \cr
x_3 - x_1 & y_3 - y_1 \cr
} \right| .
$$

## Реалізація

Функція, вычисляющая удвоенную знаковую площа трикутника:

<!--- TODO: specify code snippet id -->
``` cpp
int triangle_area_2(int x1, int y1, int x2, int y2, int x3, int y3) { return (x2 - x1) * (y3 - y1) - (y2 - y1) * (x3 - x1); }
```

Функція, возвращающая звичайну площа трикутника:

<!--- TODO: specify code snippet id -->
``` cpp
double triangle_area(int x1, int y1, int x2, int y2, int x3, int y3) { return abs(triangle_area_2(x1, y1, x2, y2, x3, y3)) / 2.0; }
```

Функція, проверяющая, утворює або указанная трійка точок поворот по годинний стрілкою:

<!--- TODO: specify code snippet id -->
``` cpp
bool clockwise(int x1, int y1, int x2, int y2, int x3, int y3) { return triangle_area_2(x1, y1, x2, y2, x3, y3) < 0; }
```

Функція, проверяющая, утворює або указанная трійка точок поворот проти годинний стрілки:

<!--- TODO: specify code snippet id -->
``` cpp
bool counter_clockwise(int x1, int y1, int x2, int y2, int x3, int y3) { return triangle_area_2(x1, y1, x2, y2, x3, y3) > 0; }
```
