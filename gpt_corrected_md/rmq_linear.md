# Задача RMQ (Range Minimum Query - мінімум на відрізку). Розв'язок за O(1) з попереднім обчисленням за O(N)

Даний масив A[1..N]. Надходять запити уваги (L, R). Для кожного запиту потрібно знайти мінімум в масиві A, починаючи з позиції L і закінчуючи позицією R. Масив A змінювати в процесі роботи не можливо. Отже, тут описано розв'язок статичної задачі RMQ.

Тут описано асимптотично оптимальний розв'язок. Він дещо вартий особливої уваги порівняно з іншими алгоритмами розв'язку RMQ, оскільки він суттєво відрізняється від них: він зводить задачу RMQ до задачі LCA, а потім використовує [алгоритм Фарах-Колтона і Бендера](lca_linear), який зводить задачу LCA назад до RMQ (але вже з урахуванням особливостей) і вирішує її.

## Алгоритм

Побудуємо за масивом A декартове дерево, де у кожній вершині ключем буде позиція i, а пріоритетом - саме число A[i] (передбачається, що в декартовому дереві пріоритети впорядковані від меншого в корені до великого). Таке дерево можна побудувати за O(N). Значить, запит RMQ(l,r) еквівалентний запиту LCA(l',r'), де l' - вершина, відповідна елементу A[l], r' - відповідна A[r]. Дійсно, LCA знайде вершину, яка за ключем знаходиться між l' і r', тобто за позицією в масиві A буде між l і r, і при цьому знайде вершину, найбільш близьку до кореня, тобто з найменшим пріоритетом, тобто найменшим значенням.

Завдання LCA ми можемо розв'язувати за O(1) з препроцесингом O(N) за допомогою [алгоритму Фараха-Колтона і Бендера](https://uk.wikipedia.org/wiki/Алгоритм_Фараха-Колтона_і_Бендера), який, що цікаво, зводить задачу LCA назад до задачі RMQ, але вже в частинному випадку.