# Трикова збалансована система числення

Трикова збалансована система числення - це нестандартна позиційна система числення. Основа системи дорівнює $3$, проте вона відрізняється від звичайної трійкової системи тим, що цифрами є $-1, 0, 1$. Оскільки використання $-1$ для однієї цифри є дуже не зручним, то зазвичай приймають яке-небудь спеціальне позначення. Узгоджуємо тут позначати мінус одиницю літерою $z$.

Наприклад, число $5$ в трійковій збалансованій системі записується як $1zz$, а число $-5$ - як $z11$. Трійкова збалансована система числення дозволяє записувати від'ємні числа без запису окремого знака "мінус". Трійкова збалансована система дозволяє дробові числа (наприклад, $1/3$ записується як $0.1$).

## Алгоритм перекладу

Навчимось переводити числа до трійкової збалансованої системи.

Для цього потрібно спочатку перевести число в тричі.

Ясно, що тепер нам потрібно позбутися від цифри $2$. Для цього зауважимо, що $2 = 3 - 1$. Тобто ми можемо замінити двійку в поточному розряді на $-1$, при цьому збільшивши наступний (тобто ліворуч від нього в десятковому записі) розряд на $1$. Якщо ми будемо рухатися по запису числа справа наліво і виконувати описану операцію (при цьому в деяких розрядах може відбуватися переповнення більше $3$, в такому випадку, звичайно, "сбрасуємо" зайві трійки в старший розряд), то прийдемо до трійкового запису з симетричним кодом. Легко переконатися, що ж саме правило вірне і для дробових чисел.

Більш елегантно описану процедуру можна сформулювати так: беремо число у трійковій системі числення, додаємо до нього нескінченності число $\ldots 11111.11111 \ldots$ та від кожного розряду результату віднімаємо одиницю (без перенесень).

Знаючи тепер алгоритм перекладу зі звичайної трійкової системи в збалансовану, легко можна реалізувати операції додавання, віднімання та ділення - просто сводячи їх до відповідних операцій над трійковими не збалансованими числами.