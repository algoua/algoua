# Знаходження степені подільника факторіала

Дано два числа: $n$ і $k$. Потрібно порахувати, з якою ступенем дільника $k$ входить число $n!$, тобто знайти найбільше $x$ таке, що $n!$ ділиться на $k^x$.

## Розв'язок для випадку простого $k$

Розглянемо спочатку випадок, коли $k$ є простим.

Выпишем вираз для факторіала в явному вигляді:

$$
n! = 1\ 2\ 3\ \ldots\ (n-1)\ n
$$

Зауважимо, що кожен $k$-тий елемент цього ряду ділиться на $k$, тобто дає +1 до відповіді; кількість таких елементів дорівнює $\lfloor n/k \rfloor$.

Далі зауважимо, що кожен $k^2$-й член цього ряда ділиться на $k^2$, тобто дає ще +1 до відповіді (враховуючи, що $k$ в першій степені вже було враховано до цього); кількість таких членів дорівнює $\lfloor n/k^2 \rfloor$.

І так далі, кожен $k^i$-ий член ряду дає +1 до відповіді, а кількість таких членів дорівнює $\lfloor n/k^i \rfloor$.

Таким чином, відповідь дорівнює величині:

$$
\frac{n}{k} + \frac{n}{k^2} + \ldots + \frac{n}{k^i} + \ldots
$$

Ця сума, звісно, не є нескінченною, тобто тільки перші приблизно $\log_k n$ членів відрізняються від нуля. Отже, асимптотика такого алгоритму дорівнює $O(\log_k n)$.

Реалізація:

<!--- TODO: specify code snippet id -->
``` cpp
int fact_pow(int n, int k) {
    int res = 0;
    while (n) {
        n /= k;
        res += n;
    }
    return res;
}
```

## Розв'язок для випадку складного $k$

Цю ідею вже не можна застосувати тут безпосередньо.

Але ми можемо розкласти $k$ на множники, вирішити задачу для кожного його простого множника, а потім вибрати мінімум з відповідей.

Більш формально, нехай $k_i$ - це $i$-ий дільник числа $k$, що входить в нього у степені $p_i$. Вирішимо задачу для $k_i$ за допомогою вищезгаданої формули за $O(\log n)$; нехай ми отримали відповідь ${\rm Ans}_i$. Отже, відповіддю для складеного $k$ буде мінімум з величин ${\rm Ans}_i / p_i$.

Враховуючи те, що факторизацію найпростішим способом можна виконати за $O(\sqrt{k})$, отримуємо підсумкову асимптотику $O(\sqrt{k})$.